<app-breadcrumb-menu [items_menu]="items_menu" [home]="home"></app-breadcrumb-menu>

<p-tabView>
    <p-tabPanel header="OSA">
        <div class="grid" *ngIf="showFiter == 1">
            <div class="col-12">
                <div class="card">
                    <div class="row">
                        <div class="md:col-4">
                            <h6>Month </h6>
                            <p-dropdown [options]="ListMonth" [showClear]="true" [filter]="true" filterBy="name"
                                [style]="{'minWidth':'100%'}"  [(ngModel)]="selectMonth"  
                                optionLabel="name" [placeholder]="selectMonth ? selectMonth.name : 'Select a Month'" ></p-dropdown>
                        </div>
                        <div class="md:col-4">
                            <h6>Product</h6>
                            <!-- <app-control-item-list (outValue)="selectPOSM($event)"></app-control-item-list> -->
                            <app-control-osa-product (outValue)="selectProduct($event)"></app-control-osa-product>
                        </div>

                        <div class="md:col-4">
                            <h6>Shop Code</h6>
                            <input [style]="{'minWidth':'100%'}" type="text" pInputText [(ngModel)]="shop_code"
                                placeholder="List Shop Code">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="col-12"> 
                    <p-toolbar>
                        <div class="p-toolbar-group-left flex flex-wrap">
                            <button pButton type="button " label="Filter" [loading]="isLoading_Filter"
                                icon="pi pi-search" (click)="filter(1)" class="p-button-sm mr-2 mt-2"></button>
                            <p-splitButton label="Master" icon="pi pi-bars" styleClass="p-button-sm mr-2 mt-2"
                                [model]="items"></p-splitButton>

                            <!-- *ngIf="totalRecords > 0"  -->
                            <button type="button" (click)="export()" label="Raw data" pButton pRipple
                                icon="pi pi-file-excel" style="float: right" class="p-button-sm mr-2 mt-2"></button>

                            <button type="button" (click)="ShowHideTemplate()" label="Import Excel" pButton pRipple
                            class="p-button-sm mr-2 mt-2" icon="pi pi-upload"></button>

                            <i class="p-toolbar-separator pi pi-bars mr-2 mt-2" style="vertical-align: middle"></i>

                            <button type="button"  (click)="showDialog()" label="Action" pButton pRipple
                            icon="pi pi-sitemap" style="float: right" class="p-button-sm mr-2 mt-2"></button>

                        </div>

                            <div class="p-toolbar-group-right">
                            </div>

                    </p-toolbar>

 
            </div>
        </div>

        <div class="card" *ngIf="showTemplate == 1">
            <p-toolbar >

                <div class="p-toolbar-group-start">

                    <div class="text-center" class="p-button-sm mr-2">
                        <input class="form-control" type="file" #myInput (change)="onChangeFile($event)"  />
                    </div>

                    <!-- <a [href]="template_osa_shop"> -->
                    <button pButton pRipple (click)="exportTemplate()" label="Get Template" icon="pi pi-file-export"
                        class="p-button-sm p-button-info mr-2"></button>
                    <!-- </a> -->

                    <button pButton pRipple (click)="importTemplate()" label="Upload" icon="pi pi-upload"
                        class="p-button-sm p-button-success mr-2 ml-2"></button>


                </div>
            </p-toolbar>

            <hr>
            <div class="card" *ngIf="dataError"> 

                <p-table #dt [columns]="cols" [value]="dataError" selectionMode="multiple" [exportHeader]="'customExportHeader'"
                    [tableStyle]="{ 'min-width': '50rem' }">
                    <ng-template pTemplate="caption">
                        <div class="flex">
                            <button type="button" pButton pRipple icon="pi pi-file-excel" (click)="exportExcel()"
                                class="p-button-success ml-auto" pTooltip="XLS" tooltipPosition="bottom"></button> 
                        </div>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns">
                                {{ col.header }}
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr [pSelectableRow]="rowData">
                            <td *ngFor="let col of columns">
                                <p >{{ rowData[col.field] }} </p> 
                            </td>
                        </tr>
                    </ng-template>
        
                </p-table>
            </div>

            <hr>
            <div class="card" *ngIf="dataMessError">
                <div class=" col-12">
                    <div class="grid">
                        <div class="col-1 font-bold">
                            Error Name :
                        </div>
                        <div class="col-11">
                            {{dataMessError}}
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <hr>
        <div class="card">
            <p-table selectionMode="single" dataKey="id" *ngIf="ListOsaShop && ListOsaShop.length > 0"
                [scrollable]="true" [value]="ListOsaShop" styleClass="p-datatable-gridlines"
                [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="caption">
                    Total Item: {{ totalRecords }}

                    <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows"
                        [totalRecords]="totalRecords" [rowsPerPageOptions]="[20, 50, 100]"></p-paginator>
                </ng-template>

                <ng-template pTemplate="header">
                    <tr>
                        <!-- <th style="width: 5rem"></th>  -->
                        <th class="text-center">RowNum</th>
                        <th>Shop Code</th>
                        <th>Shop Name</th> 
                        <th>Product</th>
                        <th class="text-center">Year Month</th>
                        <th class="text-center">Target</th>
                        <th class="text-center" >Create Date</th>
                        <!-- <th class="text-center" style="width: 5%">#</th> -->
                    </tr>
                </ng-template>  

                <ng-template pTemplate="body" let-item let-expanded="expanded">
                    <tr>
                        <!-- <td>
                    <button type="button" pButton pRipple  [pRowToggler]="item"
                        class="p-button-text p-button-rounded p-button-plain"
                        [icon]=" expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right' ></button>
                </td> -->
                         <!-- <span style="color: green; font-weight: bold;" >{{ item.product_code}}</span> -->
                        <td class="text-center"> {{ item.RowNum }}</td>
                        <td >{{ item.shop_code }}</td>
                        <td>{{ item.shop_name }}</td> 
                        <td> {{ item.product_code}} - {{item.product_name}}</td>
                        <td class="text-center" >{{ FormatYearMonth(item.year_month ) }} </td>
                        <td class="text-center" style="color: green; font-weight: bold;" > {{ item.target }}</td>
                        <td class="text-center" >{{ item.created_date }}</td>
                        <!-- <td>
                    <p-button
                        pTooltip="Update info item"
                        (click)="update(item)"
                        tooltipPosition="left"
                        icon="pi pi-file-edit "
                        styleClass="p-button-rounded p-button-text p-button-raised "
                    ></p-button>
                </td> -->
                    </tr>
                </ng-template>

                <ng-template pTemplate="rowexpansion" let-item>
                    <tr>
                        <td colspan="100% ">
                            <div class="p-3">
                                <!-- <app-user-detail 
                            (newItemEventProject)="itemProject($event)"
                            [inValue]="item"
                            [action]="'view'"
                        ></app-user-detail> -->
                            </div>
                        </td>
                    </tr>
                </ng-template>

                <ng-template pTemplate="summary ">
                    <p-paginator (onPageChange)="onPageChange($event)" [first]="first" [rows]="rows"
                        [totalRecords]="totalRecords" [rowsPerPageOptions]="[20, 50, 100]"></p-paginator>
                </ng-template>
            </p-table>
            <div class="card flex justify-content-center justify-content-between text-center"
                *ngIf="ListOsaShop && ListOsaShop.length == 0" style="float: right">
                <h5>No data</h5>
            </div>
        </div>

    </p-tabPanel>
    <p-tabPanel header="Config form">
        
        <div class="grid" *ngIf="showFiter == 1">
            <div class="col-12"> 
                    <div class="row">
                        <div class="md:col-4">
                            <h6>Month </h6>
                            <p-dropdown [options]="ListMonth" [showClear]="true" [filter]="true" filterBy="name"
                                [style]="{'minWidth':'100%'}" [(ngModel)]="selectMonth"  
                                optionLabel="name" [placeholder]="selectMonth ? selectMonth.name : 'Select a Month'" ></p-dropdown>
                        </div>
                        <!-- <div class="md:col-4">
                            <h6>Month Test</h6>
                            <app-control-year-month (outValue)="selectYearMonth($event)" > </app-control-year-month>
                        </div> -->
                       
                    </div> 
            </div>
        </div>

        <div class="grid">
            <div class="col-12">
                <div class="row">
                    <p-toolbar>
                        <div class="p-toolbar-group-left flex flex-wrap">

                            <button pButton pRipple label="Filter" icon="pi pi-search " class="p-button-sm mr-2 mt-2"
                            (click)="loadOSAFormulaList()"></button>

                            <button pButton pRipple label="New" icon="pi pi-plus"
                                class="p-button-success p-button-sm mr-2 mt-2" (click)="openNew()"></button>

                        </div>

                        <div class="p-toolbar-group-right flex flex-wrap">
                            <div class="flex flex-wrap" *ngIf="OSAFormList && OSAFormList.length > 0 ">
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="add_product" [binary]="true" [(ngModel)]="OSAFormList[0]._add_product"
                                        inputId="_add_product"></p-checkbox>
                                    <label for="add_product"><b>Add product:</b> Thêm sản phẩm</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="quantity" [binary]="true" [(ngModel)]="OSAFormList[0]._quantity"
                                        inputId="_quantity"></p-checkbox>
                                    <label for="quantity"><b>Quantity:</b> Hiện diện số lượng</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="price" [binary]="true" [(ngModel)]="OSAFormList[0]._price"
                                        inputId="_price"></p-checkbox>
                                    <label for="price"><b>Price:</b> Khảo sát giá</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="oos" [binary]="true" [(ngModel)]="OSAFormList[0]._oos"
                                        inputId="_oos"></p-checkbox>
                                        <!-- Hiện diện -->
                                    <label for="oos"><b>OOS:</b> Hết hàng</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="ooc" [binary]="true" [(ngModel)]="OSAFormList[0]._ooc"inputId="_ooc"></p-checkbox>
                                    <label for="ooc"><b>OOC:</b> Hiện diện bảng giá</label>
                                </div>

                                <div class="flex align-items-center gap-1 mr-4 mt-2">
                                    <p-checkbox name="facing" [binary]="true" [(ngModel)]="OSAFormList[0]._facing"inputId="_facing"></p-checkbox>
                                    <label for="facing"><b>Facing: </b>Số mặt</label>
                                </div> 

                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <label for="update"> <span class="font-bold">User Update :</span>  {{OSAFormList[0].employee_name}} - <span class="font-bold">Time :</span>
                                        {{OSAFormList[0].update_date}}</label>
                                </div>
                            </div>



                            <!-- <span style="color: red; font-weight: bold;"> *</span> -->
                            <div class="flex flex-wrap" *ngIf="ListOsaCreate ">
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="add_product" [binary]="true" [(ngModel)]="add_product"
                                        inputId="add_product"></p-checkbox>
                                    <label for="add_product"><b>Add product:</b>Thêm sản phẩm</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="quantity" [binary]="true" [(ngModel)]="quantity"
                                        inputId="quantity"></p-checkbox>
                                    <label for="quantity"><b>Quantity:</b> Hiện diện số lượng</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="price" [binary]="true" [(ngModel)]="price"
                                        inputId="price"></p-checkbox>
                                    <label for="price"><b>Price:</b> Khảo sát giá</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="oos" [binary]="true" [(ngModel)]="oos" inputId="oos"></p-checkbox>
                                    <label for="oos"><b>OOS:</b> Hiện diện</label>
                                </div>
                                <div class="flex align-items-center gap-1 mr-2 mt-2">
                                    <p-checkbox name="ooc" [binary]="true" [(ngModel)]="ooc" inputId="ooc"></p-checkbox>
                                    <label for="ooc"><b>OOC:</b> Hiện diện bảng giá</label>
                                </div>

                                <div class="flex align-items-center gap-1 mr-4 mt-2"> 
                                    <p-checkbox name="facing" [binary]="true" [(ngModel)]="facing"inputId="facing"></p-checkbox>
                                    <label for="facing"><b>Facing: </b>Số mặt</label>
                                </div> 

                                <div class="flex align-items-center gap-1 mt-2">
                                    <p-confirmPopup></p-confirmPopup>
                                    <button pButton (click)="CreateOSAForm($event)" type="button"
                                        [icon]="OSAFormList.length > 0 ? 'pi pi-file-edit' : 'pi pi-check'"
                                        class="p-button-sm "></button>
                                </div>

                            </div>
                            <div class="flex align-items-center gap-1 mt-2" *ngIf="!ListOsaCreate">
                                <button pTooltip="Save" tooltipPosition="top" pButton (click)="OSAFormAction()"
                                    type="button" [icon]="OSAFormList.length > 0 ? 'pi pi-save' : 'pi pi-plus'"
                                    class="p-button-sm p-button-success mt-2"></button>
                            </div>
                        </div>


                    </p-toolbar>


                </div>
            </div>
        </div>
        <div class="grid" *ngIf="userProfile && userProfile.employee_type_id == 1">
            <div class="col-12">
                <div class="row">
 

                    <p-table #dt [value]="OSAFormulaList" [rows]="12" [paginator]="true"
                        [globalFilterFields]="['year_month', 'formula_file', 'employee_code', 'employee_name']"
                        [tableStyle]="{ 'min-width': '75rem' }" [(selection)]="selectedOSAFormula" [rowHover]="true"
                        dataKey="id" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                        [showCurrentPageReport]="true" >

                        <ng-template pTemplate="header">
                            <tr>
                                <th pSortableColumn="year_month">Year Month <p-sortIcon field="year_month"></p-sortIcon> </th>
                                <th pSortableColumn="formula_file">Formula File <p-sortIcon
                                        field="formula_file"></p-sortIcon></th>
                                <th pSortableColumn="employee_code">Employee Code <p-sortIcon
                                        field="employee_code"></p-sortIcon></th>
                                <th pSortableColumn="employee_name">Employee Name <p-sortIcon
                                        field="employee_name"></p-sortIcon></th>
                                <th>Action</th>
                            </tr>
                            <tr>
                                <th>
                                    <!-- <p-columnFilter [matchMode]="'contains'" type="text"
                                        field="year_month"></p-columnFilter> -->

                                        <!-- <p-columnFilter field="year_month" matchMode="equals" [showMenu]="false">
                                            <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                                <p-dropdown  [ngModel]="value" [style]="{'minwidth': '100%', 'maxwidth': '25px'}" 
                                                [options]="ListMonth" (onChange)="filter($event.value)"
                                                    placeholder="Select a year month" [showClear]="true" appendTo="body">
                                                </p-dropdown>
                                            </ng-template>
                                        </p-columnFilter> -->

                                </th>
                                <th>
                                    <p-columnFilter [matchMode]="'contains'" type="text"
                                        field="formula_file"></p-columnFilter>
                                </th>
                                <th>
                                    <p-columnFilter [matchMode]="'contains'" type="text"
                                        field="employee_code"></p-columnFilter>
                                </th>
                                <th>
                                    <p-columnFilter [matchMode]="'contains'" type="text"
                                        field="employee_name"></p-columnFilter>
                                </th>
                                <th></th>

                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-item>
                            <tr>

                                <!-- <td> {{ this.substringYearMonth(item.year_month)}}</td>  -->
                                <td> {{ FormatYearMonth(item.year_month) }}</td>
                                <td> <a [href]="item.formula_file" target="_blank"
                                        title="formula_file">{{item.formula_file}} </a>


                                    <p-toast></p-toast>
                                    <i class="pi pi-history" (click)="op.toggle($event)"></i>

                                    <!-- [style]="{'width': '750px'}" -->
                                    <p-overlayPanel  #op [showCloseIcon]="true" >
                                        <ng-template pTemplate="content" styleClass="p-fluid">
                                            <p-table [value]="item.history" selectionMode="single"
                                                [(selection)]="selectedHistorys" styleClass="p-fluid"
                                                [paginator]="true" [rows]="3" responsiveLayout="scroll">

                                                <ng-template pTemplate="header">
                            <tr>
                                <th>Employee Code</th>
                                <th>Employee Name</th>
                                <th>Formula File</th>
                                <th>Update Date</th>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-rowData let-his>
                            <tr [pSelectableRow]="rowData">
                                <td><label style="color: green; font-weight: bold;">{{his.employee_code}}</label>
                                </td>
                                <td>{{his.employee_name}}</td>
                                <td>
                                    <a [href]="his.formula_file" target="_blank"
                                        title="formula_file">{{his.formula_file}} </a>
                                </td>
                                <td>{{his.update_date}}</td>
                            </tr>
                        </ng-template>
                    </p-table>
                    </ng-template>
                    </p-overlayPanel>



                    </td>
                    <td>{{ item.employee_code }}</td>
                    <td>{{ item.employee_name }}</td>

                    <td>
                        <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded p-button-warning mr-2"
                            (click)="editOSAFormula(item)"></button>
                        <!-- <button pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-warning" (click)="deleteOSAFormula(item)"></button> -->
                    </td>
                    </tr>
                    </ng-template>
                    <ng-template pTemplate="summary">
                        <div class="flex align-items-center justify-content-between">In total there are {{
                            OSAFormulaList ? OSAFormulaList.length : 0 }} OSA Formula List.</div>
                    </ng-template>
                    </p-table>


                    <p-dialog [(visible)]="OSAformulaDialog" [style]="{ width: '550px', height: '450px' }"
                        header="OSA Formula" [modal]="true" styleClass="p-fluid">
                        <ng-template pTemplate="content"> 

                            <div class="field"> 

                                <label for="year_month">Year Month<span style=" color: red ;"> *</span></label>

                                <p-dropdown [disabled]="action == 'create' ? false : true" [options]="ListMonth"
                                    [showClear]="true" [filter]="true" filterBy="name" [style]="{'minWidth':'100%'}"
                                    [(ngModel)]="OSAFormula.year_month" placeholder="Select a Month" 
                                    optionLabel="name" class="font-bold" ></p-dropdown>


                            </div>


                            <div class="field">
                                <label for="formula_file">Formula File<span *ngIf="action == 'create'"
                                        style=" color: red ; font-weight: bold;"> *</span></label>

                                <input class="form-control" type="file" #myInputFileUrl
                                    (change)="upload_file_url($event)"  accept=".js" />

                                <label *ngIf="OSAFormula.formula_file">
                                    URL : <a [href]="OSAFormula.formula_file" target="_blank"
                                        title="formula_file">{{OSAFormula.formula_file}}</a>
                                </label>

                            </div>
                        </ng-template>

                        <ng-template pTemplate="footer">
                            <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text"
                                (click)="hideDialog()"></button>
                            <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text"
                                (click)="saveOSAFormula()"></button>
                        </ng-template>

                    </p-dialog>

                    <!-- <p-toast></p-toast>
                    <p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog> -->

                </div>
            </div>
        </div>
    </p-tabPanel>
    <p-tabPanel header="Formular">
        <div class="grid" *ngIf="showFiter == 1">
            <div class="col-12">
                <div class="card">
                    <div class="row">
                        <div class="md:col-4">
                            <h6>Month </h6>
                            <p-dropdown (onChange)="loadFormular()" [options]="ListMonth" [showClear]="true" [filter]="true" filterBy="name"
                                [style]="{'minWidth':'100%'}" [(ngModel)]="selectMonth"  
                                optionLabel="name" [placeholder]="selectMonth ? selectMonth.name : 'Select a Month'" ></p-dropdown>
                        </div>
                        <div class="md:col-4">
                            <h6>Product Code</h6>
                            <input [style]="{'minWidth':'100%'}" type="text" pInputText [(ngModel)]="product_code"
                                placeholder="List product Code">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="grid">
            
            <div class="col-12">
                <div class="row">
                    <p-toolbar>
                        <div class="p-toolbar-group-left flex flex-wrap">
                            <button pButton pRipple label="Created List product" (click)="OnAdd()" *ngIf="product_code" icon="pi pi-plus"
                                class="p-button-success p-button-sm  mr-2 mt-2"></button>
                                 <button type="button" (click)="ShowHideTemplateFormular()" label="Created Formula" pButton pRipple
                                class="p-button-sm mr-2 mt-2" icon="pi pi-upload"></button>

                        </div>
                        <div class="p-toolbar-group-right flex flex-wrap">
                            <div class="flex flex-wrap" >
                              
                            </div>
                          
                         
                        </div>


                    </p-toolbar>
                </div>
            </div>
        </div>
        <div class="card" *ngIf="showTemplateFormular == 1">
            <p-toolbar>

                <div class="p-toolbar-group-start">
                    <div class="text-center" class="mr-2">
                        <input class="form-control" type="file" #myInputFormular (change)="onChangeFileFormular($event)" />
                    </div>
                    <button type="button" (click)="export_fileFormular()" label="File Formula" pButton pRipple
                    icon="pi pi-file-excel" style="float: right" class="p-button-sm mr-2"></button>
                    <button pButton pRipple (click)="importTemplateFormular()" class="ml-2" label="Upload" icon="pi pi-upload"
                        class="p-button-sm p-button-success"></button>
                </div>
            </p-toolbar>

          
            

        </div>

        <div pFocusTrap class="card flex align-items-center justify-content-center flex-wrap gap-3" *ngIf="FileFormular">
            <div style="width: 100%;">
                <h6>FORMULAR RESULT</h6>
                <input id="input" [(ngModel)]="FileFormular.formular_result" type="text" [style]="{'minWidth':'100%'}"  pInputText>
            </div>
            <div style="width: 100%;">
                <h6>FORMULAR NOTE</h6>
                <span class="p-float-label">
                    <input id="float-input" type="text" [(ngModel)]="FileFormular.formular_note" [style]="{'minWidth':'100%'}"  pInputText> 
                </span>
            </div>
            <div>
                 <p-confirmPopup></p-confirmPopup>
                <button class="p-button-sm mr-2 mt-2" pButton (click)="confirmUpdateFormular($event)" type="button" icon="pi pi-check" label="Update"></button>
                
            </div>
            <div>
                <p><label>Created By: {{FileFormular.created_by}}</label> <label *ngIf="FileFormular.update_by!= FileFormular.created_by"> - Update by:  {{FileFormular.update_by}}</label></p>
                <p><label *ngIf="FileFormular.update_date == FileFormular.created_date">Created Date: {{FileFormular.created_date}}</label><label *ngIf="FileFormular.update_date!= FileFormular.created_date">Update date:  {{FileFormular.update_date}}</label></p>
            </div>
        </div>
        <div class="grid mt-2">
            <div class="col-12">
                <div class="row">

                        <p-table selectionMode="single" dataKey="id" *ngIf="productFormular && productFormular.length > 0"
                            [scrollable]="true" [value]="productFormular" styleClass="p-datatable-gridlines"
                            [tableStyle]="{ 'min-width': '50rem' }">
                           
            
                            <ng-template pTemplate="header">
                                <tr>
                                    <th class="text-center">Category</th>
                                    <th class="text-center">product_id</th>
                                    <th class="text-center">Product Code</th>
                                    <th class="text-center">Product Name</th>
                                    <th class="text-center">Create Date</th>
                                    <th class="text-center">Create By</th>
                                    <th class="text-center">Action
                                        <button (click)="FilterFormular()"  pButton
                                        pRipple type="button" icon="pi pi-sync" class="p-button-info p-button-text"></button>
                                    </th>
                                </tr>
                            </ng-template>
            
                          
            
                            <ng-template pTemplate="body" let-item let-expanded="expanded">
                                <tr>
                                   
                                    <td>{{ item.category_name }}</td>
                                    <td>{{ item.product_id }}</td>
                                    <td>{{ item.product_code }}</td>
                                    <td>{{ item.product_name }}</td>
                                    <td class="text-center">{{ item.created_date }}</td>
                                    <td>{{ item.created_by }}</td>
                                    <td class="text-center">
                                        <p-confirmPopup></p-confirmPopup>
                                        <button *ngIf="userProfile.employee_type_id == 1 || userProfile.employee_type_id == 2 || userProfile.employee_type_id == 3" (click)="confirm($event,item)" pButton
                                        pRipple type="button" icon="pi pi-trash" class="p-button-danger p-button-text"></button>
                                    </td>
                                  
                                </tr>
                            </ng-template>
            
                           
                           
                        </p-table>
                         
                    </div>
                </div>
            </div>
    </p-tabPanel>
</p-tabView>


<p-dialog header="Update OSA Shop" [(visible)]="visible" [modal]="true" [style]="{ width: '20vw' }"
 [draggable]="false" [resizable]="false">
    <p class="m-0" style="color:red"> * input = 0: Remove  </p>
    <p class="m-0" style="color:red">  * input > 0: Add / Update </p>
    <input style="width: 100%;" pInputText pKeyFilter="int"   [(ngModel)]="target" />
    
    <button type="button" (click)="Update()"  label="Submit" pButton pRipple
    icon="pi pi-sitemap" style="float: right" class="p-button-sm mt-2"></button>

</p-dialog>