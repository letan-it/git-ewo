<!-- eslint-disable @angular-eslint/template/eqeqeq -->
<p-accordion class="w-full" *ngFor="let work of inValue.data_activation" [activeIndex]="work.activeIndex">
    <p-accordionTab>
        <ng-template pTemplate="header">
            <span class="flex align-items-center gap-2 w-full">
                <!-- [value]="'Work id: ' + work.work_id" -->
                <p-tag *ngIf="work && work.itemProduct" (click)="op.toggle($event)" [icon]="
                        work.itemProduct.length > 0
                            ? 'pi pi-check'
                            : 'pi pi-times'
                    " [severity]="
                        getResult(
                            work.itemProduct.length > 0
                                ? 'Bán thành công'
                                : 'Bán không thành công'
                        )
                    " [value]="
                        work.itemProduct.length > 0
                            ? 'Bán thành công'
                            : 'Bán không thành công'
                    "></p-tag>
                <span class="font-bold white-space-nowrap">{{
                    work.Guid
                }}</span>

                <!-- [severity]="getSeverity('Radio - Video')" -->
                <p-badge *ngIf="
                        work &&
                        ((work.audio && work.audio.length > 0) ||
                            (work.video && work.video.length > 0))
                    " value="Radio - Video" icon="pi pi-external-link" (click)="viewRadioVideo(work)"
                    class="ml-auto" />
                <p-overlayPanel #op>
                    <ng-template pTemplate="content">
                        <label>Form:
                            <span class="font-bold" style="color: green">[{{ work.activation_form_id }}]</span>
                            -
                            {{ work.form_name }}</label>
                        <p>
                            <label>Work id:
                                <span class="font-bold" style="color: green">[{{ work.work_id }}]</span>
                            </label>
                        </p>
                    </ng-template>
                </p-overlayPanel>
            </span>
        </ng-template>

        <p class="m-0" *ngIf="false">
            <p-tabView styleClass="tabview-custom" [scrollable]="true">
                <p-tabPanel *ngFor="let tab of work.step" [header]="tab.step_type_form">
                    <ng-template pTemplate="header">
                        <p-tag [severity]="getSeverity(tab.step_type_form)" [value]="tab.step_type_form" class="mr-4"
                            (click)="op1.toggle($event)"></p-tag>

                        <!-- <p *ngIf="tab.step_type_form == 'SURVEY'">
                            [{{tab.survey_id}}] - {{tab.survey_name}}</p> -->

                        <p-overlayPanel #op1>
                            <ng-template pTemplate="content">
                                <label><span class="font-bold" style="color: green">[{{ tab.survey_id }}]</span>
                                    - {{ tab.survey_name }}</label>
                            </ng-template>
                        </p-overlayPanel>
                    </ng-template>

                    <div class="gird">
                        <div class="row">
                            <div class="md:col-7">
                                <p-table [value]="tab.item" [tableStyle]="{ 'min-width': '50rem' }" [paginator]="true"
                                    [rows]="10" [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '50rem' }"
                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                    [rowsPerPageOptions]="[10, 20, 50]">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th class="text-center">
                                                Question
                                            </th>
                                            <th class="text-center">Value</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-item>
                                        <tr *ngIf="item.check_display == 1" [pTooltip]="item.toolTip"
                                            tooltipPosition="top">
                                            <td class="font-bold">
                                                {{ item.question_name }}
                                            </td>

                                            <!-- _value_string -> Multi-Select-->
                                            <td>
                                                <label *ngIf="
                                                        item.question_type !=
                                                        'multi-select'
                                                    ">{{
                                                        item.value_string
                                                    }}</label>
                                                <label *ngIf="
                                                        item.question_type ==
                                                        'multi-select'
                                                    ">{{
                                                        item._value_string
                                                    }}</label>
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </div>
                            <div class="md:col-5">
                                <p-galleria [value]="tab.image" [responsiveOptions]="responsiveOptions" [numVisible]="5"
                                    [containerStyle]="{
                                        height: '500px',
                                        'max-height': '500px'
                                    }">
                                    <ng-template pTemplate="item" let-item>
                                        <p-image class="text-center" [src]="item.url" [alt]="item.question_name"
                                            width="100%" height="450px" [preview]="true"></p-image>
                                    </ng-template>

                                    <ng-template pTemplate="thumbnail" let-item>
                                        <div class="grid grid-nogutter justify-content-center">
                                            <p-image [src]="item.url" [alt]="item.question_name" width="50" height="50"
                                                class="shadow-4 m-auto"></p-image>
                                        </div>
                                    </ng-template>
                                </p-galleria>

                            </div>
                        </div>
                    </div>

                    <div class="gird">
                        <div class="row">
                            <div class="md:col-5" *ngIf="tab.audio && tab.audio.length > 0">
                                <p-scrollPanel [style]="{ width: '100%', height: '250px' }">
                                    <audio *ngFor="let audio of tab.audio" controls style="width: 278px; height: 35px"
                                        class="mr-2">
                                        <source [src]="audio.url" type="audio/mpeg" />
                                    </audio>
                                </p-scrollPanel>
                            </div>

                            <div class="md:col-7" *ngIf="tab.video && tab.video.length > 0">
                                <p-scrollPanel [style]="{ width: '100%', height: '250px' }">
                                    <video width="320" height="240" controls *ngFor="let video of tab.video"
                                        class="mr-2">
                                        <source [src]="video.url" type="video/mp4" />
                                    </video>
                                </p-scrollPanel>
                            </div>
                        </div>
                    </div>
                </p-tabPanel>
            </p-tabView>
        </p>

        <p-tabView styleClass="tabview-custom" [scrollable]="true">
            <p-tabPanel *ngFor="let tab of work.step" [header]="tab.step_type_form">
                <ng-template pTemplate="header">
                    <p-tag [severity]="getSeverity(tab.step_type_form)" [value]="tab.step_type_form" class="mr-4">
                    </p-tag>
                    <label>[{{ tab.survey_id }}] - {{ tab.survey_name }}</label>


                </ng-template>

                <div class="gird">
                    <div class="row">

                        <div class="md:col-8">
                            <p-table [value]="tab.item" *ngIf="tab && tab.item && tab.item.length > 0">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th class="text-center">Question</th>
                                        <th class="text-center">Value</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-item>
                                    <!-- [pTooltip]="item.toolTip" tooltipPosition="top" -->
                                    <tr *ngIf="item.check_display == 1">
                                        <td class="font-bold">
                                            {{ item.question_name }}
                                        </td>

                                        <td>
                                            <label *ngIf="
                                                    item.question_type !=
                                                    'multi-select'
                                                ">{{ item.value_string }}</label>
                                            <label *ngIf="
                                                    item.question_type ==
                                                    'multi-select'
                                                ">{{ item._value_string }}</label>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                        <!-- 
                             [containerStyle]="{
                                    height: '350px',
                                    'max-height': '350px'
                                }"
                                 -->
                        <div class="md:col-4" *ngIf="false">
                            <p-galleria [value]="tab.image" [responsiveOptions]="responsiveOptions" [numVisible]="5">
                                <!-- height="450px" -->
                                <ng-template pTemplate="item" let-item>
                                    <p-image class="text-center" [src]="item.url" [alt]="item.question_name"
                                        width="100%" [preview]="true"></p-image>
                                </ng-template>

                                <ng-template pTemplate="thumbnail" let-item>
                                    <div class="grid grid-nogutter justify-content-center">
                                        <p-image [src]="item.url" [alt]="item.question_name" width="50" height="50"
                                            class="shadow-4 m-auto"></p-image>
                                    </div>
                                </ng-template>
                            </p-galleria>

                        </div>

                        <div class="md:col-12 mt-5" *ngIf="false">
                            <div class="flex justify-content-center">
                                <p-dropdown [options]="tab.list_question" [(ngModel)]="selectedQuestion"
                                    optionLabel="question_name" [filter]="true" filterBy="question_name"
                                    [showClear]="true" placeholder="Select a question">
                                    <ng-template let-item pTemplate="item">
                                        <div class="flex align-items-center gap-2">
                                            <div>[{{ item.question_id }}] - {{ item.question_name }}</div>
                                        </div>
                                    </ng-template>
                                </p-dropdown>
                            </div>
                            <p>
                                <input id="myInputImage" #myInputImage type="file"
                                    (change)="onUploadFileImage($event, tab, work.shop_code)"
                                    accept=".png, .jpg, .jpeg" />
                            </p>
                        </div>
                        <!-- tab.item -->
                        <div class="md:col-4" *ngIf="true">
                            <app-control-tab-photo [KPI]="'ACTIVATION'" [fulldata]="inValue" [ACTIVATIONconfig]="tab"
                                [inValue]="tab.image" [shop_code]="work.shop_code"
                                [is_edit_data]="inValue.data_activation.is_edit_data"></app-control-tab-photo>
                        </div>


                    </div>
                </div>
            </p-tabPanel>

            <p-tabPanel header="SELLOUT - GIFT">
                <ng-template pTemplate="header">
                    <p-tag [severity]="getSeverity('SELLOUT - GIFT')" [value]="'SELLOUT - GIFT'" class="mr-4"></p-tag>
                </ng-template>

                <div class="gird">
                    <div class="row">
                        <div class="md:col-7">
                            <p class="m-0" *ngIf="
                                    work &&
                                    work.itemProduct &&
                                    work.itemProduct.length > 0
                                ">
                                <!-- [paginator]="true" [rows]="10"
                                    [showCurrentPageReport]="true"
                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                    [rowsPerPageOptions]="[10, 20, 50]" -->
                                <p-table [value]="work.itemProduct">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th class="text-center">Product</th>
                                            <th class="text-center">Image</th>
                                            <th class="text-center">QRCode</th>
                                            <th class="text-center">
                                                Quantity
                                            </th>
                                            <th class="text-center">Price</th>
                                            <th class="text-center">Total</th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-item>
                                        <tr>
                                            <td>
                                                <span class="font-bold" style="color: green">[{{
                                                        item.product_id
                                                    }}]</span>
                                                - {{ item.product_code }} -
                                                {{ item.product_name }}
                                            </td>
                                            <td class="text-center">
                                                <p-image [src]="item.image" [alt]="item.product_code" width="50"
                                                    height="50" class="shadow-4 m-auto" [preview]="true"></p-image>
                                            </td>
                                            <td>{{ item.barcode }}</td>
                                            <!-- style="color: orange;" -->
                                            <td class="text-center font-bold">
                                                {{ item.quantity }}
                                            </td>
                                            <td class="text-center font-bold" style="color: green">
                                                {{
                                                    item.price
                                                        | number : "1.0-0"
                                                }}
                                            </td>
                                            <td class="text-center font-bold" style="color: red">
                                                {{
                                                    item.total
                                                        | number : "1.0-0"
                                                }}
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </p>
                        </div>
                        <div class="md:col-5">
                            <p class="m-0" *ngIf="
                                    work &&
                                    work.giftListApp &&
                                    work.giftListApp.length > 0
                                ">
                                <p-table [value]="work.giftListApp" dataKey="id" editMode="row">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th class="text-center">Gift</th>
                                            <th class="text-center">Image</th>
                                            <th class="text-center">
                                                Quantity
                                            </th>
                                            <th class="text-center">
                                                <!-- <button pButton pRipple icon="pi pi-plus" class="p-button-success mr-2"
                                                    (click)="openNew(work.stepGift, 'create')"></button> -->
                                                Action
                                            </th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-item let-editing="editing" let-ri="rowIndex">
                                        <tr [pEditableRow]="item">
                                            <!-- <td><span class="font-bold" style="color: green;">[{{
                                                    item.gift_id }}]</span>
                                                - {{item.gift_code}} -
                                                {{item.gift_name}}</td> -->

                                            <td>
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <app-control-gift (outValue)="
                                                                selectItemId(
                                                                    item,
                                                                    $event
                                                                )
                                                            " [itemGift]="
                                                                item.gift_id
                                                            "></app-control-gift>
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        <span class="font-bold" style="color: green">[{{
                                                                item.gift_id
                                                            }}]</span>
                                                        - {{ item.gift_code }} -
                                                        {{ item.gift_name }}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>

                                            <td class="text-center">
                                                <p-image [src]="item.gift_image" [alt]="item.gift_name" width="50"
                                                    height="50" class="shadow-4 m-auto" [preview]="true"></p-image>
                                            </td>

                                            <!-- <td class="text-center font-bold">{{ item.quantity}}</td> -->

                                            <td class="text-center font-bold">
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <p-inputNumber [min]="1" id="quantity" [(ngModel)]="
                                                                item.quantity
                                                            " placeholder="Enter quantity"></p-inputNumber>
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        {{ item.quantity }}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>

                                            <td>
                                                <div class="flex align-items-center justify-content-center gap-2">
                                                    <button *ngIf="!editing" pButton pRipple type="button"
                                                        pInitEditableRow icon="pi pi-pencil" (click)="
                                                            onRowEdit(item)
                                                        " class="p-button-rounded p-button-text"></button>
                                                    <button *ngIf="editing" pButton pRipple type="button"
                                                        pSaveEditableRow icon="pi pi-check" (click)="
                                                            onRowEditSave(
                                                                item,
                                                                'create.update'
                                                            )
                                                        "
                                                        class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                                    <button *ngIf="editing" pButton pRipple type="button"
                                                        pCancelEditableRow icon="pi pi-times"
                                                        class="p-button-rounded p-button-text p-button-danger"></button>

                                                    <button pTooltip="History Details" tooltipPosition="top" pButton
                                                        pRipple type="button" icon="pi pi-history" (click)="
                                                            op1.toggle($event)
                                                        " class="p-button-rounded p-button-text" *ngIf="
                                                            !editing &&
                                                            item.his &&
                                                            item.his.length > 0
                                                        "></button>
                                                </div>

                                                <!-- <button pButton pRipple icon="pi pi-pencil"
                                                    class="p-button-rounded p-button-text p-button-success mr-2"
                                                    (click)="editGift(item , 'update')"></button>
                                                <button pTooltip="History Details" tooltipPosition="top" pButton pRipple
                                                    type="button" icon="pi pi-history" (click)="op1.toggle($event)"
                                                    class="p-button-text"
                                                    *ngIf="item.his && item.his.length > 0"></button> -->
                                            </td>
                                        </tr>

                                        <!-- HISTORY GIFT-->
                                        <p-overlayPanel #op1 [style]="{ width: '550px' }" [showCloseIcon]="true">
                                            <ng-template pTemplate="content">
                                                <p-table [value]="item.his" selectionMode="single" [paginator]="true"
                                                    [rows]="3" responsiveLayout="scroll">
                                                    <ng-template pTemplate="header">
                                                        <tr>
                                                            <th class="text-center">
                                                                Update By
                                                            </th>
                                                            <th class="text-center">
                                                                Gift
                                                            </th>
                                                            <th class="text-center">
                                                                Quantity
                                                            </th>
                                                            <th class="text-center">
                                                                Update Date
                                                            </th>
                                                        </tr>
                                                    </ng-template>
                                                    <ng-template pTemplate="body" let-rowData let-his>
                                                        <tr [pSelectableRow]="
                                                                rowData
                                                            ">
                                                            <td>
                                                                <span class="font-bold" style="
                                                                        color: green;
                                                                    ">[{{
                                                                        his.created_by
                                                                    }}]</span>
                                                                -
                                                                {{
                                                                    his.created_code
                                                                }}
                                                                -
                                                                {{
                                                                    his.created_name
                                                                }}
                                                            </td>
                                                            <td>
                                                                <span class="font-bold" style="
                                                                        color: green;
                                                                    ">[{{
                                                                        his.gift_id
                                                                    }}]</span>
                                                                -
                                                                {{
                                                                    his.gift_code
                                                                }}
                                                                -
                                                                {{
                                                                    his.gift_name
                                                                }}
                                                            </td>
                                                            <td class="text-center">
                                                                {{
                                                                    his.quantity
                                                                }}
                                                            </td>
                                                            <td class="text-center">
                                                                {{
                                                                    his.created_date
                                                                }}
                                                            </td>
                                                        </tr>
                                                    </ng-template>
                                                </p-table>
                                            </ng-template>
                                        </p-overlayPanel>
                                    </ng-template>
                                </p-table>
                            </p>
                            <div class="col-12 flex align-items-end" *ngIf="false">
                                <button pButton pRipple icon="pi pi-plus" label="Create" (click)="createGift()"
                                    class="p-button-success ml-auto mb-1"></button>
                            </div>
                            <p class="m-0" *ngIf="
                                    work &&
                                    work.giftListWeb &&
                                    work.giftListWeb.length > 0
                                ">
                                <p-table [value]="work.giftListWeb" dataKey="id" editMode="row">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th class="text-center">Gift</th>
                                            <th class="text-center">Image</th>
                                            <th class="text-center">
                                                Quantity
                                            </th>
                                            <th class="text-center">
                                                <!-- <button pButton pRipple icon="pi pi-plus" class="p-button-success mr-2"
                                                    (click)="openNew(work.stepGift, 'create')"></button> -->
                                                Action
                                            </th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-item let-editing="editing" let-ri="rowIndex">
                                        <tr [pEditableRow]="item">
                                            <!-- <td><span class="font-bold" style="color: green;">[{{
                                                    item.gift_id }}]</span>
                                                - {{item.gift_code}} -
                                                {{item.gift_name}}</td> -->

                                            <td>
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <app-control-gift (outValue)="
                                                                selectItemId(
                                                                    item,
                                                                    $event
                                                                )
                                                            " [itemGift]="
                                                                item.gift_id
                                                            "></app-control-gift>
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        <span class="font-bold" style="color: green">[{{
                                                                item.gift_id
                                                            }}]</span>
                                                        - {{ item.gift_code }} -
                                                        {{ item.gift_name }}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>

                                            <td class="text-center">
                                                <p-image [src]="item.gift_image" [alt]="item.gift_name" width="50"
                                                    height="50" class="shadow-4 m-auto" [preview]="true"></p-image>
                                            </td>

                                            <!-- <td class="text-center font-bold">{{ item.quantity}}</td> -->

                                            <td class="text-center font-bold">
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <p-inputNumber [min]="1" id="quantity" [(ngModel)]="
                                                                item.quantity
                                                            " placeholder="Enter quantity"></p-inputNumber>
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        {{ item.quantity }}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>

                                            <td>
                                                <div class="flex align-items-center justify-content-center gap-2">
                                                    <button *ngIf="!editing" pButton pRipple type="button"
                                                        icon="pi pi-pencil" (click)="
                                                            editGiftV2(item)
                                                        " class="p-button-rounded p-button-text"></button>
                                                    <button class="p-button-rounded p-button-text" type="button" pButton
                                                        pRipple icon="pi pi-trash" (click)="
                                                            delete($event, item)
                                                        "></button>

                                                    <button pTooltip="History Details" tooltipPosition="top" pButton
                                                        pRipple type="button" icon="pi pi-history" (click)="
                                                            op1.toggle($event)
                                                        " class="p-button-rounded p-button-text" *ngIf="
                                                            !editing &&
                                                            item.his &&
                                                            item.his.length > 0
                                                        "></button>
                                                </div>

                                                <!-- <button pButton pRipple icon="pi pi-pencil"
                                                    class="p-button-rounded p-button-text p-button-success mr-2"
                                                    (click)="editGift(item , 'update')"></button>
                                                <button pTooltip="History Details" tooltipPosition="top" pButton pRipple
                                                    type="button" icon="pi pi-history" (click)="op1.toggle($event)"
                                                    class="p-button-text"
                                                    *ngIf="item.his && item.his.length > 0"></button> -->
                                            </td>
                                        </tr>

                                        <!-- HISTORY GIFT-->
                                        <p-overlayPanel #op1 [style]="{ width: '550px' }" [showCloseIcon]="true">
                                            <ng-template pTemplate="content">
                                                <p-table [value]="item.his" selectionMode="single" [paginator]="true"
                                                    [rows]="3" responsiveLayout="scroll">
                                                    <ng-template pTemplate="header">
                                                        <tr>
                                                            <th class="text-center">
                                                                Update By
                                                            </th>
                                                            <th class="text-center">
                                                                Gift
                                                            </th>
                                                            <th class="text-center">
                                                                Quantity
                                                            </th>
                                                            <th class="text-center">
                                                                Update Date
                                                            </th>
                                                        </tr>
                                                    </ng-template>
                                                    <ng-template pTemplate="body" let-rowData let-his>
                                                        <tr [pSelectableRow]="
                                                                rowData
                                                            ">
                                                            <td>
                                                                <span class="font-bold" style="
                                                                        color: green;
                                                                    ">[{{
                                                                        his.created_by
                                                                    }}]</span>
                                                                -
                                                                {{
                                                                    his.created_code
                                                                }}
                                                                -
                                                                {{
                                                                    his.created_name
                                                                }}
                                                            </td>
                                                            <td>
                                                                <span class="font-bold" style="
                                                                        color: green;
                                                                    ">[{{
                                                                        his.gift_id
                                                                    }}]</span>
                                                                -
                                                                {{
                                                                    his.gift_code
                                                                }}
                                                                -
                                                                {{
                                                                    his.gift_name
                                                                }}
                                                            </td>
                                                            <td class="text-center">
                                                                {{
                                                                    his.quantity
                                                                }}
                                                            </td>
                                                            <td class="text-center">
                                                                {{
                                                                    his.created_date
                                                                }}
                                                            </td>
                                                        </tr>
                                                    </ng-template>
                                                </p-table>
                                            </ng-template>
                                        </p-overlayPanel>
                                    </ng-template>
                                </p-table>
                            </p>
                        </div>
                    </div>
                </div>
            </p-tabPanel>
        </p-tabView>
    </p-accordionTab>
</p-accordion>

<p-dialog [(visible)]="radioVideoDialog" [style]="{ width: '750px' }" header="Radio - Video" [modal]="true"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="formgrid grid">
            <div class="field col" *ngIf="work && work.audio && work.audio.length > 0">
                <label for="audio">Audio</label>
                <p-scrollPanel [style]="{ width: '100%', height: '250px' }">
                    <audio *ngFor="let audio of work.audio" controls style="width: 278px; height: 35px" class="mr-2">
                        <source [src]="audio.url" type="audio/mpeg" />
                    </audio>
                </p-scrollPanel>
            </div>
            <div class="field col" *ngIf="work && work.video && work.video.length > 0">
                <label for="video">Video</label>
                <p-scrollPanel [style]="{ width: '100%', height: '250px' }">
                    <video width="320" height="240" controls *ngFor="let video of work.video" class="mr-2">
                        <source [src]="video.url" type="video/mp4" />
                    </video>
                </p-scrollPanel>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
    </ng-template>
</p-dialog>

<p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>

<p-dialog [(visible)]="giftDialog" [style]="{ width: '450px' }" header="Gift Details" [modal]="true"
    styleClass="p-fluid">
    <ng-template pTemplate="content">
        <div class="field">
            <label for="gift">Gift<span class="font-bold" style="color: red"> *</span></label>
            <app-control-gift (outValue)="selectItemId(gift, $event)" [itemGift]="gift.gift_id"
                [itemDisPlay]="action == 'create' ? false : true"></app-control-gift>
        </div>
        <div class="field">
            <label for="quantity">Quantity<span class="font-bold" style="color: red">
                    *</span></label>
            <p-inputNumber [min]="1" id="quantity" [(ngModel)]="gift.quantity" placeholder="Enter quantity">
            </p-inputNumber>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text"
            (click)="hideDialogGift()"></button>
        <button pButton pRipple label="Remove" icon="pi pi-trash" class="p-button-text" (click)="deleteGift()"
            *ngIf="action == 'create' ? false : true"></button>
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text"
            (click)="onRowEditSave(gift, 'create.update')"></button>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="isCreateGift" [style]="{ width: '80rem', height: 'fit-content' }" header="Create gift"
    [modal]="true" styleClass="p-fluid" [closable]="true" (onHide)="resetCreate()">
    <ng-template pTemplate="content">
        <div class="flex flex-column w-full gap-1">
            <div class="flex flex-row w-full h-fit align-items-end justify-content-start gap-3">
                <div class="md:col-6 m-0">
                    <label>Promotion</label>
                    <p-dropdown [options]="promotion_gift" appendTo="body" [(ngModel)]="select_promotion"
                        optionLabel="promotion_name" [showClear]="true" [filter]="true" filterBy="promotion_name"
                        [style]="{ minWidth: '100%' }" placeholder="Select Promotion">
                        <ng-template let-item pTemplate="item">
                            <div class="flex align-items-center gap-2">
                                <div>
                                    {{ item.promotion_code }} -
                                    {{ item.promotion_name }}
                                </div>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div>
                <div class="md:col-6 m-0">
                    <label>Gift</label>
                    <p-dropdown appendTo="body" [options]="gift_create_list" [(ngModel)]="select_gift"
                        optionLabel="gift_name" [showClear]="true" [filter]="true" filterBy="gift_name"
                        [style]="{ minWidth: '100%' }" placeholder="Select gift" (onClick)="selectPromotion()">
                        <ng-template let-item pTemplate="item">
                            <div class="flex align-items-center gap-2">
                                <div>
                                    {{ item.gift_code }} -
                                    {{ item.gift_name }}
                                </div>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div>
            </div>
            <div class="flex flex-row w-full h-fit align-items-end justify-content-start gap-3">
                <div class="md:col-6 m-0">
                    <label>Quantity</label>
                    <p-inputNumber inputId="integeronly" [(ngModel)]="quantity" />
                </div>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="footer">
        <!-- <button pButton pRipple [disabled]="editMode" label="Reset all data input" icon="pi pi-times"
            class="p-button-text" (click)="resetAllInput()"></button> -->
        <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-text" (click)="Save($event)"></button>
    </ng-template>
</p-dialog>
<p-toast></p-toast>
<!-- <p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog> -->
